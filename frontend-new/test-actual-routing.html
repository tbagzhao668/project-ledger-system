<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®é™…è·¯ç”±æµ‹è¯•é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .test-button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; cursor: pointer; }
        .test-button:hover { background: #0056b3; }
        .result { margin: 10px 0; padding: 10px; background: #f8f9fa; border-left: 4px solid #007bff; }
        .current-route { background: #e7f3ff; border-left: 4px solid #28a745; }
        .auth-status { background: #fff3cd; border-left: 4px solid #ffc107; }
    </style>
</head>
<body>
    <h1>ğŸš€ å®é™…è·¯ç”±è¡Œä¸ºæµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>ğŸ“ å½“å‰è·¯ç”±çŠ¶æ€</h2>
        <div id="current-route" class="result current-route">
            å½“å‰è·¯å¾„: <span id="current-path">/</span>
        </div>
        <div id="auth-status" class="result auth-status">
            è®¤è¯çŠ¶æ€: <span id="auth-text">æ£€æŸ¥ä¸­...</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ§ª è·¯ç”±è·³è½¬æµ‹è¯•</h2>
        <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æµ‹è¯•è·¯ç”±è·³è½¬ï¼š</p>
        
        <button class="test-button" onclick="navigateTo('/')">è·³è½¬åˆ°æ ¹è·¯å¾„ /</button>
        <button class="test-button" onclick="navigateTo('/login')">è·³è½¬åˆ°ç™»å½•é¡µ /login</button>
        <button class="test-button" onclick="navigateTo('/register')">è·³è½¬åˆ°æ³¨å†Œé¡µ /register</button>
        <button class="test-button" onclick="navigateTo('/dashboard')">è·³è½¬åˆ°ä»ªè¡¨æ¿ /dashboard</button>
        <button class="test-button" onclick="navigateTo('/projects')">è·³è½¬åˆ°é¡¹ç›®ç®¡ç† /projects</button>
        
        <div id="navigation-results"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ” è®¤è¯çŠ¶æ€ç®¡ç†</h2>
        <p>æ¨¡æ‹Ÿè®¤è¯çŠ¶æ€å˜åŒ–ï¼š</p>
        
        <button class="test-button" onclick="clearAuth()">æ¸…é™¤è®¤è¯çŠ¶æ€</button>
        <button class="test-button" onclick="setAuth()">è®¾ç½®è®¤è¯çŠ¶æ€</button>
        <button class="test-button" onclick="simulateLogin()">æ¨¡æ‹Ÿç™»å½•</button>
        <button class="test-button" onclick="simulateLogout()">æ¨¡æ‹Ÿç™»å‡º</button>
        
        <div id="auth-results"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“‹ è·¯ç”±é€»è¾‘è¯´æ˜</h2>
        <ul>
            <li><strong>æ ¹è·¯å¾„ /</strong>: åº”è¯¥æ ¹æ®è®¤è¯çŠ¶æ€é‡å®šå‘</li>
            <li><strong>ç™»å½•é¡µ /login</strong>: æœªè®¤è¯ç”¨æˆ·å¯è®¿é—®ï¼Œå·²è®¤è¯ç”¨æˆ·é‡å®šå‘åˆ°ä»ªè¡¨æ¿</li>
            <li><strong>æ³¨å†Œé¡µ /register</strong>: æœªè®¤è¯ç”¨æˆ·å¯è®¿é—®ï¼Œå·²è®¤è¯ç”¨æˆ·é‡å®šå‘åˆ°ä»ªè¡¨æ¿</li>
            <li><strong>ä»ªè¡¨æ¿ /dashboard</strong>: éœ€è¦è®¤è¯ï¼Œæœªè®¤è¯ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µ</li>
            <li><strong>é¡¹ç›®ç®¡ç† /projects</strong>: éœ€è¦è®¤è¯ï¼Œæœªè®¤è¯ç”¨æˆ·é‡å®šå‘åˆ°ç™»å½•é¡µ</li>
        </ul>
    </div>

    <script>
        // æ¨¡æ‹ŸVue Routerçš„è¡Œä¸º
        let currentRoute = '/';
        let isAuthenticated = false;
        
        // åˆå§‹åŒ–
        function init() {
            updateCurrentRoute();
            updateAuthStatus();
            checkAuthFromStorage();
        }
        
        // æ›´æ–°å½“å‰è·¯ç”±æ˜¾ç¤º
        function updateCurrentRoute() {
            document.getElementById('current-path').textContent = currentRoute;
        }
        
        // æ›´æ–°è®¤è¯çŠ¶æ€æ˜¾ç¤º
        function updateAuthStatus() {
            const authText = document.getElementById('auth-text');
            if (isAuthenticated) {
                authText.textContent = 'âœ… å·²è®¤è¯';
                authText.style.color = 'green';
            } else {
                authText.textContent = 'âŒ æœªè®¤è¯';
                authText.style.color = 'red';
            }
        }
        
        // æ£€æŸ¥localStorageä¸­çš„è®¤è¯çŠ¶æ€
        function checkAuthFromStorage() {
            const token = localStorage.getItem('token');
            isAuthenticated = !!token;
            updateAuthStatus();
        }
        
        // è·¯ç”±è·³è½¬é€»è¾‘ï¼ˆæ¨¡æ‹ŸVue Routerï¼‰
        function navigateTo(path) {
            const resultsDiv = document.getElementById('navigation-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'result';
            
            resultDiv.innerHTML = `
                <strong>å°è¯•è·³è½¬åˆ°: ${path}</strong><br>
                æ—¶é—´: ${new Date().toLocaleTimeString()}<br>
                å½“å‰è®¤è¯çŠ¶æ€: ${isAuthenticated ? 'å·²è®¤è¯' : 'æœªè®¤è¯'}<br>
            `;
            
            // æ¨¡æ‹Ÿè·¯ç”±å®ˆå«é€»è¾‘
            if (path === '/') {
                // æ ¹è·¯å¾„é‡å®šå‘é€»è¾‘
                if (isAuthenticated) {
                    resultDiv.innerHTML += `<br>ğŸ”„ é‡å®šå‘åˆ°: /dashboard (å·²è®¤è¯ç”¨æˆ·)`;
                    currentRoute = '/dashboard';
                } else {
                    resultDiv.innerHTML += `<br>ğŸ”„ é‡å®šå‘åˆ°: /login (æœªè®¤è¯ç”¨æˆ·)`;
                    currentRoute = '/login';
                }
            } else if (path === '/login' || path === '/register') {
                // ç™»å½•/æ³¨å†Œé¡µé€»è¾‘
                if (isAuthenticated) {
                    resultDiv.innerHTML += `<br>ğŸ”„ é‡å®šå‘åˆ°: /dashboard (å·²è®¤è¯ç”¨æˆ·ä¸èƒ½è®¿é—®ç™»å½•/æ³¨å†Œé¡µ)`;
                    currentRoute = '/dashboard';
                } else {
                    resultDiv.innerHTML += `<br>âœ… æ­£å¸¸è·³è½¬åˆ°: ${path}`;
                    currentRoute = path;
                }
            } else if (path === '/dashboard' || path === '/projects') {
                // éœ€è¦è®¤è¯çš„é¡µé¢é€»è¾‘
                if (isAuthenticated) {
                    resultDiv.innerHTML += `<br>âœ… æ­£å¸¸è·³è½¬åˆ°: ${path}`;
                    currentRoute = path;
                } else {
                    resultDiv.innerHTML += `<br>ğŸ”„ é‡å®šå‘åˆ°: /login (æœªè®¤è¯ç”¨æˆ·ä¸èƒ½è®¿é—®)`;
                    currentRoute = '/login';
                }
            }
            
            resultsDiv.appendChild(resultDiv);
            updateCurrentRoute();
        }
        
        // è®¤è¯çŠ¶æ€ç®¡ç†
        function clearAuth() {
            localStorage.removeItem('token');
            isAuthenticated = false;
            updateAuthStatus();
            addAuthResult('æ¸…é™¤è®¤è¯çŠ¶æ€æˆåŠŸ');
        }
        
        function setAuth() {
            localStorage.setItem('token', 'test-token-123');
            isAuthenticated = true;
            updateAuthStatus();
            addAuthResult('è®¾ç½®è®¤è¯çŠ¶æ€æˆåŠŸ');
        }
        
        function simulateLogin() {
            localStorage.setItem('token', 'login-token-' + Date.now());
            isAuthenticated = true;
            updateAuthStatus();
            addAuthResult('æ¨¡æ‹Ÿç™»å½•æˆåŠŸ');
        }
        
        function simulateLogout() {
            localStorage.removeItem('token');
            isAuthenticated = false;
            updateAuthStatus();
            addAuthResult('æ¨¡æ‹Ÿç™»å‡ºæˆåŠŸ');
        }
        
        function addAuthResult(message) {
            const resultsDiv = document.getElementById('auth-results');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'result';
            resultDiv.innerHTML = `
                <strong>è®¤è¯æ“ä½œ:</strong> ${message}<br>
                æ—¶é—´: ${new Date().toLocaleTimeString()}<br>
                æ–°çŠ¶æ€: ${isAuthenticated ? 'å·²è®¤è¯' : 'æœªè®¤è¯'}
            `;
            resultsDiv.appendChild(resultDiv);
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', init);
        
        // ç›‘å¬localStorageå˜åŒ–
        window.addEventListener('storage', function(e) {
            if (e.key === 'token') {
                checkAuthFromStorage();
            }
        });
    </script>
</body>
</html>
