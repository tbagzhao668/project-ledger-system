<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue组件测试</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <h1>Vue组件测试</h1>
        
        <div v-if="loading">加载中...</div>
        <div v-else>
            <h2>租户列表</h2>
            <div v-for="tenant in tenants" :key="tenant.id" style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
                <h3>{{ tenant.name }}</h3>
                <p>状态: {{ tenant.status }}</p>
                <button @click="testClick(tenant)" style="background: #007bff; color: white; padding: 5px 10px; border: none; border-radius: 3px;">
                    测试点击 ({{ tenant.status === 'active' ? '禁用' : '启用' }})
                </button>
            </div>
        </div>
        
        <div style="margin-top: 20px;">
            <button @click="addTestTenant" style="background: #28a745; color: white; padding: 10px; border: none; border-radius: 5px;">
                添加测试租户
            </button>
        </div>
        
        <div id="output" style="margin-top: 20px; padding: 10px; background: #f8f9fa; border: 1px solid #dee2e6;">
            <h3>调试输出:</h3>
            <div v-for="(log, index) in logs" :key="index" style="margin: 5px 0; padding: 5px; background: white; border-left: 3px solid #007bff;">
                {{ log }}
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted } = Vue;
        
        createApp({
            setup() {
                const loading = ref(true);
                const tenants = ref([]);
                const logs = ref([]);
                
                const addLog = (message) => {
                    const timestamp = new Date().toLocaleTimeString();
                    logs.value.unshift(`[${timestamp}] ${message}`);
                    console.log(message);
                };
                
                const testClick = (tenant) => {
                    addLog(`🔘 按钮被点击: ${tenant.name} (${tenant.status})`);
                    
                    const newStatus = tenant.status === 'active' ? 'disabled' : 'active';
                    addLog(`🔄 切换状态: ${tenant.status} -> ${newStatus}`);
                    
                    // 模拟状态更新
                    tenant.status = newStatus;
                    addLog(`✅ 状态已更新: ${tenant.name} 现在是 ${newStatus}`);
                };
                
                const addTestTenant = () => {
                    const newTenant = {
                        id: Date.now().toString(),
                        name: `测试租户${tenants.value.length + 1}`,
                        status: 'active'
                    };
                    tenants.value.push(newTenant);
                    addLog(`➕ 添加新租户: ${newTenant.name}`);
                };
                
                onMounted(() => {
                    addLog('🚀 Vue组件已挂载');
                    
                    // 模拟加载数据
                    setTimeout(() => {
                        tenants.value = [
                            { id: '1', name: '999', status: 'active' },
                            { id: '2', name: '监控系统', status: 'active' },
                            { id: '3', name: '测试租户', status: 'disabled' }
                        ];
                        loading.value = false;
                        addLog('📋 租户数据已加载');
                    }, 1000);
                });
                
                return {
                    loading,
                    tenants,
                    logs,
                    testClick,
                    addTestTenant
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
