# å‰ç«¯è®¤è¯é—®é¢˜ä¿®å¤è¯´æ˜

## ğŸ¯ é—®é¢˜ç¡®è®¤

ç»è¿‡æµ‹è¯•ï¼Œ**åç«¯APIå®Œå…¨æ­£å¸¸å·¥ä½œ**ï¼š
- âœ… ç”¨æˆ· `123@123.com` ç™»å½•æˆåŠŸ
- âœ… é¡¹ç›®åˆ—è¡¨APIè¿”å›5ä¸ªé¡¹ç›®
- âœ… é¡¹ç›®ç»Ÿè®¡APIæ­£å¸¸å·¥ä½œ
- âœ… æ‰€æœ‰ç›¸å…³APIç«¯ç‚¹éƒ½æ­£å¸¸

**é—®é¢˜å‡ºç°åœ¨å‰ç«¯**ï¼šé¡¹ç›®åˆ—è¡¨é¡µé¢æ˜¾ç¤º `total: 0, projects: Array(0)`

## ğŸ” é—®é¢˜åˆ†æ

### å¯èƒ½çš„åŸå› 
1. **å‰ç«¯æ²¡æœ‰æ­£ç¡®å­˜å‚¨ç™»å½•åçš„token**
2. **å‰ç«¯å‘é€è¯·æ±‚æ—¶æ²¡æœ‰åŒ…å«è®¤è¯å¤´**
3. **å‰ç«¯tokenå·²è¿‡æœŸ**
4. **å‰ç«¯è·¯ç”±å®ˆå«æœ‰é—®é¢˜**
5. **å‰ç«¯localStorageä¸­çš„tokenä¸¢å¤±æˆ–æŸå**

### é—®é¢˜ç°è±¡
- é¡¹ç›®åˆ›å»ºæˆåŠŸï¼ˆè¯´æ˜æœ‰æœ‰æ•ˆtokenï¼‰
- é¡¹ç›®åˆ—è¡¨è¿”å›ç©ºï¼ˆè¯´æ˜tokenå¯èƒ½æœ‰é—®é¢˜ï¼‰
- é¡¹ç›®è¯¦æƒ…é¡µé¢æ­£å¸¸ï¼ˆè¯´æ˜éƒ¨åˆ†APIè°ƒç”¨æ­£å¸¸ï¼‰

## ğŸ› ï¸ ä¿®å¤æ­¥éª¤

### 1. æ£€æŸ¥å‰ç«¯tokenå­˜å‚¨
åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æ£€æŸ¥ï¼š
```javascript
// åœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œ
localStorage.getItem('project-ledger-token')
```

### 2. æ£€æŸ¥å‰ç«¯è¯·æ±‚æ‹¦æˆªå™¨
ç¡®è®¤ `frontend/src/utils/request.js` ä¸­çš„è¯·æ±‚æ‹¦æˆªå™¨æ­£å¸¸å·¥ä½œï¼š
```javascript
// è¯·æ±‚æ‹¦æˆªå™¨
service.interceptors.request.use(
  config => {
    // æ·»åŠ è®¤è¯token
    const token = getToken()
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    // ...
  }
)
```

### 3. æ£€æŸ¥å‰ç«¯è®¤è¯çŠ¶æ€
ç¡®è®¤ `frontend/src/utils/auth.js` ä¸­çš„è®¤è¯å‡½æ•°æ­£å¸¸å·¥ä½œï¼š
```javascript
export function getToken() {
  return localStorage.getItem(TOKEN_KEY)
}

export function isAuthenticated() {
  return !!getToken()
}
```

### 4. æ£€æŸ¥å‰ç«¯è·¯ç”±å®ˆå«
ç¡®è®¤è·¯ç”±å®ˆå«æ­£ç¡®å¤„ç†è®¤è¯çŠ¶æ€ï¼š
```javascript
// åœ¨è·¯ç”±å®ˆå«ä¸­
if (!isAuthenticated()) {
  // é‡å®šå‘åˆ°ç™»å½•é¡µ
  next('/login')
}
```

## ğŸš€ ç«‹å³ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šé‡æ–°ç™»å½•
1. é€€å‡ºå½“å‰ç™»å½•çŠ¶æ€
2. é‡æ–°ä½¿ç”¨ `123@123.com` / `123123` ç™»å½•
3. æ£€æŸ¥localStorageä¸­çš„tokenæ˜¯å¦æ­£ç¡®å­˜å‚¨

### æ–¹æ¡ˆ2ï¼šæ£€æŸ¥tokenæ ¼å¼
åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æ£€æŸ¥tokenæ ¼å¼ï¼š
```javascript
const token = localStorage.getItem('project-ledger-token')
console.log('Token:', token)
console.log('Token length:', token ? token.length : 0)
console.log('Token starts with eyJ:', token ? token.startsWith('eyJ') : false)
```

### æ–¹æ¡ˆ3ï¼šå¼ºåˆ¶åˆ·æ–°token
å¦‚æœtokenå·²è¿‡æœŸï¼Œå¯ä»¥ï¼š
1. æ¸…é™¤localStorageä¸­çš„token
2. é‡æ–°ç™»å½•è·å–æ–°token

## ğŸ“ éªŒè¯ä¿®å¤æ•ˆæœ

ä¿®å¤åï¼Œé¡¹ç›®åˆ—è¡¨é¡µé¢åº”è¯¥ï¼š
1. æ­£ç¡®æ˜¾ç¤º5ä¸ªé¡¹ç›®
2. ä¸å†å‡ºç°403è®¤è¯é”™è¯¯
3. é¡¹ç›®ç»Ÿè®¡æ˜¾ç¤ºæ­£ç¡®æ•°æ®
4. æ‰€æœ‰APIè°ƒç”¨æ­£å¸¸å·¥ä½œ

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### Tokenå­˜å‚¨é”®å
- å­˜å‚¨é”®ï¼š`project-ledger-token`
- ç”¨æˆ·ä¿¡æ¯é”®ï¼š`project-ledger-user`

### è®¤è¯å¤´æ ¼å¼
```javascript
headers: {
  'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
}
```

### ç§Ÿæˆ·ID
- ç”¨æˆ·ç§Ÿæˆ·IDï¼š`8a96a7e5-5c9c-44e2-851e-32bc65ad17cc`
- æ‰€æœ‰é¡¹ç›®éƒ½å±äºè¿™ä¸ªç§Ÿæˆ·

## ğŸ‰ é¢„æœŸç»“æœ

ä¿®å¤å®Œæˆåï¼š
- âœ… é¡¹ç›®åˆ—è¡¨æ­£å¸¸æ˜¾ç¤º5ä¸ªé¡¹ç›®
- âœ… é¡¹ç›®ç»Ÿè®¡æ˜¾ç¤ºæ­£ç¡®æ•°æ®
- âœ… æ‰€æœ‰APIè°ƒç”¨æ­£å¸¸å·¥ä½œ
- âœ… ç”¨æˆ·ä½“éªŒå®Œå…¨æ­£å¸¸

## ğŸ“ å¦‚æœé—®é¢˜æŒç»­

å¦‚æœæŒ‰ç…§ä¸Šè¿°æ­¥éª¤ä¿®å¤åé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·ï¼š
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ç½‘ç»œè¯·æ±‚çš„è®¤è¯å¤´
3. æä¾›å…·ä½“çš„é”™è¯¯æ—¥å¿—
4. å¯èƒ½éœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥å‰ç«¯ä»£ç é€»è¾‘
