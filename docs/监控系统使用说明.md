# 监控系统使用说明

## 📖 概述

监控系统是工程项目流水账管理系统的独立管理后台，为系统经营者提供系统监控、租户管理、操作日志查看等功能。系统采用独立的认证机制，与普通业务系统完全分离。

## 🚀 快速开始

### 1. 访问监控系统
- **登录地址**: `/monitoring/login`
- **默认账号**: `admin@monitoring.local`
- **默认密码**: `Lovelewis@586930`

### 2. 首次登录
- 系统会自动创建监控系统租户和默认管理员账号
- 登录成功后自动跳转到监控仪表盘

## 🏗️ 系统架构

### 前端架构
```
监控系统前端
├── 登录页面 (MonitoringLogin.vue)
├── 仪表盘 (MonitoringDashboard.vue)
├── 租户管理 (MonitoringTenants.vue)
├── 操作日志 (MonitoringLogs.vue)
├── 健康检查 (MonitoringHealth.vue)
└── 导航组件 (MonitoringNav.vue)
```

### 后端架构
```
监控系统后端
├── 认证接口 (/api/v1/monitoring/*)
├── 监控接口 (/api/v1/admin/*)
├── 数据模型 (monitoring.py)
└── 权限控制 (require_super_admin)
```

## 📱 功能模块

### 1. 监控仪表盘 📊
**功能描述**: 系统整体运行状态概览

**主要特性**:
- 系统概览统计（租户数、项目数、财务记录数等）
- 服务状态监控
- 快速操作入口
- 实时数据更新

**访问路径**: `/monitoring/dashboard`

### 2. 租户管理 👥
**功能描述**: 管理系统中的所有租户账户

**主要特性**:
- 租户列表查看和搜索
- 租户状态管理（启用/禁用）
- 租户密码重置
- 租户详情查看
- 分页和筛选功能

**访问路径**: `/monitoring/tenants`

**操作说明**:
1. **查看租户**: 点击"查看"按钮查看租户详细信息
2. **禁用租户**: 点击"禁用"按钮，输入原因后确认
3. **启用租户**: 点击"启用"按钮，输入原因后确认
4. **重置密码**: 点击"重置密码"按钮，系统生成新密码

### 3. 操作日志 📋
**功能描述**: 查看所有管理员操作记录

**主要特性**:
- 操作日志列表查看
- 按操作类型、目标类型筛选
- 操作详情查看
- 日志导出功能
- 操作统计信息

**访问路径**: `/monitoring/logs`

**筛选选项**:
- **操作类型**: 登录、状态更新、密码重置等
- **目标类型**: 租户、系统、用户等
- **时间排序**: 按操作时间、状态、响应时间排序

### 4. 健康检查 ❤️
**功能描述**: 监控系统各服务的健康状态

**主要特性**:
- 整体健康状态显示
- 各服务健康状态监控
- 健康检查历史记录
- 手动健康检查
- 自动定期检查

**访问路径**: `/monitoring/health`

**检查项目**:
- 数据库连接状态
- API服务状态
- 前端服务状态
- 系统整体状态

## 🔐 安全特性

### 1. 权限控制
- 只有`super_admin`角色可以访问
- 独立的认证系统
- 操作审计日志

### 2. 操作审计
- 记录所有管理员操作
- IP地址和用户代理记录
- 操作详情存储
- 操作时间戳记录

### 3. 数据隔离
- 监控数据与业务数据分离
- 租户数据隔离
- 权限分级管理

## 📊 数据统计

### 系统概览
- **总租户数**: 系统中注册的所有租户数量
- **总项目数**: 所有租户创建的项目总数
- **总财务记录数**: 所有租户的财务记录总数
- **总用户数**: 系统中所有用户数量
- **今日新增租户**: 当天新注册的租户数量
- **活跃租户数**: 最近7天有登录的租户数量

### 操作统计
- **总日志数**: 系统记录的操作日志总数
- **活跃管理员**: 有操作记录的管理员数量
- **今日操作**: 当天执行的操作数量
- **异常操作**: 系统检测到的异常操作数量

## 🛠️ 技术特性

### 1. 响应式设计
- 支持桌面端和移动端
- 自适应布局
- 触摸友好的操作界面

### 2. 实时更新
- 自动数据刷新
- 健康状态实时监控
- 操作日志实时记录

### 3. 性能优化
- 数据分页加载
- 异步数据获取
- 缓存机制

## 📱 移动端支持

### 响应式布局
- 移动端优化的导航菜单
- 触摸友好的按钮设计
- 自适应的表格显示

### 移动端特性
- 隐藏次要信息
- 优化触摸操作
- 简化复杂操作

## 🔧 配置说明

### 1. 自动检查频率
- 健康检查: 每5分钟自动执行
- 数据刷新: 每5分钟自动更新
- 可手动触发立即检查

### 2. 分页设置
- 租户列表: 每页20条记录
- 操作日志: 每页50条记录
- 健康历史: 每页50条记录

### 3. 搜索和筛选
- 支持模糊搜索
- 多条件筛选
- 实时搜索结果

## 🚨 故障排除

### 1. 登录问题
**问题**: 无法登录监控系统
**解决方案**:
- 检查账号密码是否正确
- 确认网络连接正常
- 联系系统管理员

### 2. 数据加载问题
**问题**: 页面数据无法加载
**解决方案**:
- 检查网络连接
- 刷新页面重试
- 检查认证状态

### 3. 操作失败问题
**问题**: 租户管理操作失败
**解决方案**:
- 检查操作权限
- 确认目标租户状态
- 查看操作日志

## 📞 技术支持

### 联系信息
- **技术支持**: 开发团队
- **问题反馈**: 通过操作日志记录
- **紧急联系**: 系统管理员

### 常见问题
1. **Q**: 如何修改默认管理员密码？
   **A**: 目前系统不支持修改默认密码，建议联系开发团队

2. **Q**: 可以添加更多管理员账号吗？
   **A**: 目前系统只支持单一管理员账号，如需多账号支持请联系开发团队

3. **Q**: 如何备份监控数据？
   **A**: 监控数据存储在系统数据库中，可通过数据库备份功能进行备份

## 🔄 更新日志

### v1.0.0 (2025-01-27)
- ✅ 基础监控功能
- ✅ 租户管理功能
- ✅ 操作日志功能
- ✅ 健康检查功能
- ✅ 独立认证系统
- ✅ 响应式界面设计

## 📋 开发计划

### 短期目标 (1-2周)
- [ ] 完善租户管理页面
- [ ] 实现操作日志导出
- [ ] 添加健康检查详情
- [ ] 优化移动端显示

### 中期目标 (1个月)
- [ ] 实现租户活跃度分析
- [ ] 添加数据可视化图表
- [ ] 实现实时状态通知
- [ ] 添加性能监控功能

### 长期目标 (3个月)
- [ ] 集成邮件通知系统
- [ ] 实现自动化运维脚本
- [ ] 添加多租户数据隔离
- [ ] 实现分布式监控

---

**注意**: 本系统仅供系统管理员使用，请妥善保管登录凭据，定期检查系统状态，确保系统安全稳定运行。
